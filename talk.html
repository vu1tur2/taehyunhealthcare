<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>태현헬스케어 - 홈케어 의료기기 전문 브랜드</title>

    <!-- SEO 핵심 메타태그 -->
    <meta name="description" content="태현헬스케어는 도플러, 흡입기, 산소포화도 측정기 등 가정용 의료기기를 전문으로 취급하는 브랜드입니다.">
    <meta name="keywords" content="태현헬스케어, 도플러, 산소포화도, 흡입기, 의료기기, 홈케어, 건강">
    <meta name="author" content="태현헬스케어">
    <meta name="robots" content="index, follow">

    <!-- Open Graph (SNS 공유 시 정보) -->
    <meta property="og:title" content="태현헬스케어 - 홈케어 전문 기업">
    <meta property="og:description" content="가정에서 사용할 수 있는 의료기기 전문 브랜드">
    <meta property="og:image" content="https://vu1tur2.github.io/taehyunhealthcare/img/logo.png">
    <meta property="og:url" content="https://vu1tur2.github.io/taehyunhealthcare/">
    <meta property="og:type" content="website">

    <!-- 구글 서치콘솔 -->
    <meta name="google-site-verification" content="0UGIN-4-UxQ22XoXpMqVQQr8Ns0h8XXDVIXI4RViAiE" />
    
    <!-- 네이버 서치어드바이저 -->
    <meta name="naver-site-verification" content="0cd68edc7a0e5ab742e7038c1182c6ac30f1973c" />
    
    
    <!-- css,js 연결 코드 -->
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/banner.js"></script>
    <script src="js/rank.js"></script>
</head>
<body>
    <!-- 시작 -->
    <div id="wrap">
        <div class="chat">
            <div class="chat1">
                <li><a href="index.html">홈케어 전문회사 <span> 태현헬스케어</span></a></li>
            </div>
        </div>
    </div>
    <!-- 끝 -->


    <!-- 헤더 시작 -->
    <header>
    <div class="header-left"></div>

    <div class="logo-wrapper">
        <img class="logo" src="logo.png" alt="태현 헬스케어 이미지" />
    </div>

    <form class="search-form" action="searchResult.html" method="get" autocomplete="off">
        <input
        type="text"
        name="query"
        class="search-input"
        placeholder="검색어를 입력하세요"
        />
    </form>
    </header>

    <!-- 헤더 끝 -->

    <!-- 메뉴 시작 -->
    <nav>
        <ul class="menu">
            <li>
                <a href="#">회사소개</a>
                <ul class="submenu">
                    <li><a href="about.html">회사소개</a></li>
                    <li><a href="03_about.html">오시는길</a></li>
                </ul>
            </li>
            <li>
                <a href="#">제품소개</a>
                <ul class="submenu">
                    <li><a href="01_products.html">Fetal Doppler</a></li>
                    <li><a href="02_products.html">Nebulizer</a></li>
                    <li><a href="03_products.html">Pulse Oximeter</a></li>
                </ul>
            </li>
            <li>
                <a href="partnership.html">B2B</a>
            </li>
            <li>
                <a href="notice.html">COMMUNITY</a>
                <ul class="submenu">
                    <li><a href="talk.html">QnA</a></li>
                    <li><a href="memo.html">자료실</a></li>
                    <li><a href="notice.html">공지사항</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <!-- 메뉴 끝 -->
    
    <!-- content 시작 -->
      <div class="n_contents">
        <div class="qna-header">
          <h2>QnA</h2>
          <span class="m_span"><a href="talk_1.html">글쓰기</a></span>
      </div>
          <table class="board">
            <colgroup>
              <col style="width: 10%;" />  <!-- 글번호 -->
              <col style="width: 50%;" />  <!-- 제목 -->
              <col style="width: 20%;" />  <!-- 날짜 -->
              <col style="width: 20%;" />  <!-- 작성자 -->
            </colgroup>
            <thead>
              <tr>
                <th>번호</th>
                <th>제목</th>
                <th>날짜</th>
                <th>작성자</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        <div class="content-wrapper"><!-- 페이지 번호 nav 삽입됨 --></div>
      </div>
      <div class="pagination-container">
        <div class="pagination"></div>
      </div>
    <!-- content 끝  -->

   <!-- 콘텐츠 시작 -->
    <div id="contents">
        <div class="notice-card">
        <div class="notice-card-header">
            <h3>공지사항</h3>
            <button class="notice-more-btn" onclick="location.href='notice.html'">›</button>
        </div>
        <ul class="notice-list">
            <!-- JS로 공지글이 자동 삽입됨 -->
        </ul>
        </div>
        <div class="footer">
            <div class="flogo"><a href="#"><img src="img/logo.png" alt="태현헬스케어 로고"></a></div>
            <div class="copy">
                <p>
                    상호명: 태현헬스케어 본사: 광주광역시 동구 천변우로 453 (코밀빌딩) 4층 413호 <br>
                    사업자등록번호: 139-86-02746 <span class="n">대표번호: 062-233-6015</span>
                    이메일: thhealthcare@naver.com <br>
                    평일: 09:00 ~ 17:30 / 점심시간: 12:00 ~ 13:00 / 휴무일" 주말 및 공휴일
                </p>
            </div>
        </div>
    </div>
    <!-- 콘텐츠 끝 -->


    <script>
    document.addEventListener("DOMContentLoaded", function(){
      const isAdmin = localStorage.getItem('isAdmin') === 'true';
      let allPosts = JSON.parse(localStorage.getItem('posts') || '[]');

      // talk 타입 없으면 기본 지정
      allPosts = allPosts.map(post => {
        if (!post.type) post.type = 'talk';
        return post;
      });
      localStorage.setItem('posts', JSON.stringify(allPosts));

      // talk 타입만 골라서 보여주기
      allPosts.reverse();
      let posts = allPosts.filter(p => p.type === 'talk');
      posts.forEach((post,i) => {
        if (post.id == null) post.id = i;
      });

      const tbody = document.querySelector('table.board tbody');
      const nav = document.querySelector('.pagination');
      const pageSize = 7, pagesToShow = 4;
      let currentPage = 1, groupStart = 1;

      function refreshPosts() {
        const cur = JSON.parse(localStorage.getItem('posts')||'[]').reverse();
        posts = cur.filter(p => p.type === 'talk');
      }

      function getTotalPages() {
        return Math.ceil(posts.length / pageSize) || 1;
      }

      function renderPosts(page=1) {
        refreshPosts();
        currentPage = page;
        const totalPages = getTotalPages();
        if (currentPage > totalPages) currentPage = totalPages;
        if (groupStart > totalPages) groupStart = Math.max(1, totalPages - pagesToShow + 1);

        const startIdx = (currentPage -1)*pageSize;
        const slice = posts.slice(startIdx, startIdx + pageSize);
        tbody.innerHTML = '';

        slice.forEach((post, idx) => {
          const number = startIdx + idx + 1;
          let formatted = post.date;
          if (formatted.includes('.')) {
            const [y,m,d] = formatted.split('.');
            formatted = `${y.trim()}-${m.trim().padStart(2,'0')}-${d.trim().padStart(2,'0')}`;
          }
          const displayTitle = post.visibility === 'private' ? '비공개' : post.title;
          const tr = document.createElement('tr');
          tr.style.position = 'relative';
          const link = document.createElement('a');
          link.href = `view.html?id=${post.id}`;
          link.textContent = displayTitle;
          link.onclick = (e) => {
            if (post.visibility==='private' && !isAdmin) {
              e.preventDefault();
              showCredentialModal(post);
            }
          };
          tr.innerHTML = `<td>${number}</td><td></td><td>${formatted}</td><td>${post.maskedName || post.author || '익명'}</td>`;
          tr.querySelector('td:nth-child(2)').appendChild(link);

          if (isAdmin) {
            const btn = document.createElement('button');
            btn.textContent = '삭제';
            btn.style.cssText = 'position:absolute; right:-80px; top:50%; transform:translateY(-50%); padding:0 10px; background:#eee; border:1px solid #aaa; cursor:pointer;';
            btn.onclick = () => {
              if (confirm('삭제하시겠습니까?')) {
                const original = JSON.parse(localStorage.getItem('posts') || '[]');
                const updated = original.filter(p => !(p.type === 'talk' && p.id === post.id));
                localStorage.setItem('posts', JSON.stringify(updated));
                renderPosts(currentPage);
              }
            };
            tr.appendChild(btn);
          }

          tbody.appendChild(tr);
        });

        renderPagination();
      }

      function renderPagination() {
        const totalPages = getTotalPages();
        nav.innerHTML = '';
        if (groupStart > 1) {
          const prev = document.createElement('button');
          prev.textContent = '◀';
          prev.classList.add('nav-group');
          prev.onclick = () => { groupStart = Math.max(1, groupStart - pagesToShow); renderPosts(groupStart); };
          nav.appendChild(prev);
        }
        const end = Math.min(groupStart + pagesToShow -1, totalPages);
        for (let i=groupStart; i<=end; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          if (i === currentPage) btn.classList.add('active');
          btn.onclick = () => renderPosts(i);
          nav.appendChild(btn);
        }
        if (end < totalPages) {
          const nxt = document.createElement('button');
          nxt.textContent = '▶';
          nxt.classList.add('nav-group');
          nxt.onclick = () => { groupStart += pagesToShow; renderPosts(groupStart); };
          nav.appendChild(nxt);
        }
      }

      function showCredentialModal(post) {
        const modal = document.createElement('div');
        Object.assign(modal.style, { position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.5)', display:'flex',alignItems:'center',justifyContent:'center',zIndex:9999 });
        modal.innerHTML = `
          <div style="background:#fff;padding:30px;border-radius:10px;max-width:400px">
            <h3>비공개 글입니다</h3>
            <input id="modalName" placeholder="이름" style="width:100%;margin-bottom:10px;margin-top:10px;border:1px solid #ccc;padding:10px;">
            <input id="modalEmail" placeholder="이메일" style="width:100%;margin-bottom:20px;border:1px solid #ccc;padding:10px;">
            <div style="text-align: center;">
            <button id="confirmBtn" style="background:#2a8;color:#fff;cursor:pointer; padding: 0 15px;">확인</button>
            <button id="cancelBtn" style="margin-left:10px;cursor:pointer; padding: 0 15px;">취소</button>
            </div>
          </div>`;
        document.body.appendChild(modal);
        modal.querySelector('#cancelBtn').onclick = () => document.body.removeChild(modal);
        modal.querySelector('#confirmBtn').onclick = () => {
          const n=modal.querySelector('#modalName').value.trim();
          const e=modal.querySelector('#modalEmail').value.trim();
          if (n===post.name && e===post.email) {
            window.location.href = `view.html?id=${post.id}`;
          } else alert('정보가 일치하지 않습니다.');
        };
      }

      renderPosts(1);
    });
    </script>
    <script>
       // ✅ 페이지 돌아올 때 검색창 비우기
       window.addEventListener('pageshow', function (event) {
       if (event.persisted) {
       const searchInput = document.querySelector('input[name="query"]');
       if (searchInput) searchInput.value = '';
        }
     });
    </script>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
    const noticeList = document.querySelector(".notice-list");
    let noticePosts = JSON.parse(localStorage.getItem('noticePosts') || '[]');

    // 날짜 + id 기준 최신 정렬
    noticePosts.sort((a, b) => {
        const dateCompare = new Date(b.date) - new Date(a.date);
        if (dateCompare !== 0) return dateCompare;
        return b.id - a.id;
    });

    const latestNotices = noticePosts.slice(0, 4); // 최대 4개

    noticeList.innerHTML = "";

    latestNotices.forEach(item => {
        const li = document.createElement("li");
        li.innerHTML = `
        <a href="notice_view.html?id=${item.id}">
            <span class="notice-title">${item.title}</span>
            <span class="notice-date">${item.date}</span>
        </a>
        `;
        noticeList.appendChild(li);
    });
    });
    </script>
</body>
</html>
